<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>SAVE FOOD</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <!-- jQuery and Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/cadastroUsuario.css" />
    </head>
    <body>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <a class="navbar-brand" href="#">
                <img src="./img/Group 1.png" width="90" height="90" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="./index.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./cadastro.html">CADASTRO DE PRODUTO</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./cadastroUsuario.html">CADASTRO DE USUÁRIO</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./receita.html">RECEITAS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./login.html">LOGIN</a>
                    </li>
                </ul>
            </div>
        </nav>
        <section class="formulario-usuario">
            <form class="form-cadastro" id="form-cadastro">
                <div class="form-group">
                    <h3 class="nome-cadastro">Cadastro de Usuário</h3>
                    
                    <label for="exampleInputNome">Nome Completo</label>
                    <input type="text" name="nome" class="form-control" id="nome">
                    <label for="exampleInputEmail">E-mail</label>
                    <input type="email" name="email" class="form-control" id="email">
                    <label for="inputPassword6" class="col-form-label">Senha</label>
                    <input type="password" id="senha" class="form-control" aria-describedby="passwordHelpInline">
                    <span id="passwordHelpInline" class="form-text">
                        Deve conter de no mínimo 8 Caracteres.
                    </span>
                </div>
                
                <div class="cadastrar_btn">
                    <button type="submit" id="submit" class="btn btn-primary">Cadastrar</button>
                    <!-- <button type="button" class="btn btn-primary" onClick="window.location.reload()">Cadastrar</button> -->
                </div>

            </form>
        </section>
        <footer>
            <div id="footer_content">
                <div id="footer_contacts">
                    <div class="imageCenter">
                        <img src="./img/Group 1.png" width="90" height="90" alt="logo" class="idimg">
                    </div>
                    <div id="footer_social_media">
                        <a href="#" target="_blank"><img src="./img/instagram (1).png" alt="instagram"></a>
    
                        <a href="#" target="_blank"><img src="./img/facebook novo.png" alt="facebook"></a>
    
                        <a href="#" target="_blank"><img src="./img/whatsapp.png" alt="whatsapp"></a>

                        <a href="#" target="_blank"><img src="./img/twitter.png" alt="twitter"></a>
                    </div>
                </div>
                <ul class="footer-list">
                    <li>
                        <h3>Menu</h3>
                    </li>
                    <li>
                        <a href="./index.html" class="footer-link">Home</a>
                    </li>
                    <li>
                        <a href="./cadastro.html" class="footer-link">Cadastro Produtos</a>
                    </li>
                    <li>
                        <a href="./cadastroUsuario.html" class="footer-link">Cadastro Usuário</a>
                    </li>
                </ul>
                <ul class="footer-list">
                    <li>
                        <h3>Receitas</h3>
                    </li>
                    <li>
                        <a href="./receita.html" class="footer-link">Receitas</a>
                    </li>
                </ul>
            </div>
            <div id="footer_copyright">
                <!-- &#169 -->
                Copyright &copy; 2024 - SaveFood.
                    Todos os direitos reservados.
            </div>
        </footer>
        <script>
            document.getElementById('form-cadastro').addEventListener('submit', async function(event) {
                event.preventDefault();

                const nome = document.getElementById('nome').value;
                const email = document.getElementById('email').value;
                const senha = document.getElementById('senha').value;

                try {
                    const response = await fetch('http://localhost:3100/usuarios', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ nome, email, senha })
                    });

                    if (!response.ok) {
                    const erro = await response.json();
                    throw new Error(erro.error || 'Erro ao cadastrar usuário');
                    }

                    const data = await response.json();
                    // alert(data.mensagem);

                    // Limpar o formulário após o cadastro
                    document.getElementById('form-cadastro').reset();

                    Swal.fire({
                        title: 'Sucesso!',
                        text: 'Usuário cadastrado com sucesso.',
                        icon: 'success',
                        confirmButtonText: 'Ok'
                    });

                } catch (error) {
                    console.error('Erro ao cadastrar usuário:', error);
                    alert('Erro ao cadastrar usuário: ' + error.message);
                }
                
            });
            

        </script>

        
            <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous">
            </script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
                integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
                crossorigin="anonymous">
            </script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
                integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
                crossorigin="anonymous">
            </script>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </body>
</html>      


        
    